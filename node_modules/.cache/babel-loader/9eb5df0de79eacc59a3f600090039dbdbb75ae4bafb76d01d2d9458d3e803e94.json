{"ast":null,"code":"import _regeneratorRuntime from\"/Users/lollapalarza/ada/projects/smart-dream-journal/smart-dream-journal-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"/Users/lollapalarza/ada/projects/smart-dream-journal/smart-dream-journal-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/Users/lollapalarza/ada/projects/smart-dream-journal/smart-dream-journal-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{useAuth}from\"../../contexts/authContext\";import\"./login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function getAccessToken(_x){return _getAccessToken.apply(this,arguments);}function _getAccessToken(){_getAccessToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(credentials){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",fetch(\"https://smart-dream-journal-backend-bf5b1011b117.herokuapp.com/token/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(credentials)}).then(function(response){if(response.status===200){return response.json();}}).then(function(data){return data.access_token;}).catch(function(error){return console.log(error);}));case 1:case\"end\":return _context2.stop();}},_callee2);}));return _getAccessToken.apply(this,arguments);}function Login(){var navigate=useNavigate();// states\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];// contexts\nvar _useAuth=useAuth(),setCurrentUserName=_useAuth.setCurrentUserName,setAccessToken=_useAuth.setAccessToken,setTokenHeader=_useAuth.setTokenHeader;var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var accessToken;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();// fetch accessToken\n_context.next=3;return getAccessToken({username:username,password:password});case 3:accessToken=_context.sent;// store access token, token header, and user name contexts\nlocalStorage.setItem(\"ACCESSTOKEN\",accessToken);localStorage.setItem(\"TOKENHEADER\",JSON.stringify({Authorization:\"Bearer \".concat(accessToken)}));localStorage.setItem(\"USERNAME\",username);setCurrentUserName(username);setAccessToken(accessToken);setTokenHeader({Authorization:\"Bearer \".concat(accessToken)});if(accessToken){navigate(\"/profile\");}case 11:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x2){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row align-items-center my-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-7\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-5\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome to Smart Dream Journal!\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"font-weight-light\",children:\"Please log in\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"username\",onChange:function onChange(e){return setUsername(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login-button\",children:\"Login\"})]})]})]})]})})});}export default Login;","map":{"version":3,"names":["React","useState","useNavigate","useAuth","jsx","_jsx","jsxs","_jsxs","getAccessToken","_x","_getAccessToken","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","credentials","wrap","_callee2$","_context2","prev","next","abrupt","fetch","method","headers","body","JSON","stringify","then","response","status","json","data","access_token","catch","error","console","log","stop","Login","navigate","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useAuth","setCurrentUserName","setAccessToken","setTokenHeader","handleSubmit","_ref","_callee","e","accessToken","_callee$","_context","preventDefault","sent","localStorage","setItem","Authorization","concat","_x2","className","children","onSubmit","htmlFor","type","placeholder","onChange","target","value"],"sources":["/Users/lollapalarza/ada/projects/smart-dream-journal/smart-dream-journal-frontend/src/components/public/login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../../contexts/authContext\";\nimport \"./login.css\";\n\nasync function getAccessToken(credentials) {\n  return fetch(\n    \"https://smart-dream-journal-backend-bf5b1011b117.herokuapp.com/token/\",\n    {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(credentials),\n    }\n  )\n    .then((response) => {\n      if (response.status === 200) {\n        return response.json();\n      }\n    })\n    .then((data) => {\n      return data.access_token;\n    })\n    .catch((error) => console.log(error));\n}\n\nfunction Login() {\n  const navigate = useNavigate();\n  // states\n  const [username, setUsername] = useState();\n  const [password, setPassword] = useState();\n  // contexts\n  const { setCurrentUserName, setAccessToken, setTokenHeader } = useAuth();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    // fetch accessToken\n    const accessToken = await getAccessToken({\n      username,\n      password,\n    });\n    // store access token, token header, and user name contexts\n    localStorage.setItem(\"ACCESSTOKEN\", accessToken);\n    localStorage.setItem(\n      \"TOKENHEADER\",\n      JSON.stringify({ Authorization: `Bearer ${accessToken}` })\n    );\n    localStorage.setItem(\"USERNAME\", username);\n    setCurrentUserName(username);\n    setAccessToken(accessToken);\n    setTokenHeader({ Authorization: `Bearer ${accessToken}` });\n    if (accessToken) {\n      navigate(\"/profile\");\n    }\n  };\n\n  return (\n    <div className=\"login\">\n      <div className=\"container\">\n        <div className=\"row align-items-center my-5\">\n          <div className=\"col-lg-7\"></div>\n          <div className=\"col-lg-5\">\n            <h1>Welcome to Smart Dream Journal!</h1>\n            <h2 className=\"font-weight-light\">Please log in</h2>\n            <form onSubmit={handleSubmit}>\n              <section>\n                <label htmlFor=\"username\">Username: </label>\n                <input\n                  type=\"text\"\n                  placeholder=\"username\"\n                  onChange={(e) => setUsername(e.target.value)}\n                />\n              </section>\n              <section>\n                <label htmlFor=\"password\">Password: </label>\n                <input\n                  type=\"password\"\n                  placeholder=\"password\"\n                  onChange={(e) => setPassword(e.target.value)}\n                />\n                <button type=\"submit\" className=\"login-button\">\n                  Login\n                </button>\n              </section>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}