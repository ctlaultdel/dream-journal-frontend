{"ast":null,"code":"import _objectSpread from\"/Users/lollapalarza/ada/projects/smart-dream-journal/smart-dream-journal-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/lollapalarza/ada/projects/smart-dream-journal/smart-dream-journal-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/lollapalarza/ada/projects/smart-dream-journal/smart-dream-journal-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useParams,useNavigate}from\"react-router\";import{useAuth}from\"../../../contexts/authContext\";import\"./entry.css\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Entry(){var _useAuth=useAuth(),userEntries=_useAuth.userEntries,setUserEntries=_useAuth.setUserEntries;var navigate=useNavigate();// contexts\nvar _useAuth2=useAuth(),tokenHeader=_useAuth2.tokenHeader;var _useParams=useParams(),entryID=_useParams.entryID;var entry=userEntries.filter(function(entry){return entry.id===parseInt(entryID);})[0];function deleteEntry(_x){return _deleteEntry.apply(this,arguments);}// event handler for delete journal entry\nfunction _deleteEntry(){_deleteEntry=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(entryID){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"https://smart-dream-journal-backend-bf5b1011b117.herokuapp.com/profile/journal/\".concat(entryID,\"/\"),{method:\"POST\",headers:_objectSpread(_objectSpread({},tokenHeader),{},{\"Content-Type\":\"application/json\"})}).then(function(response){return response.status;}).catch(function(error){return console.log(error);});case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}},_callee2);}));return _deleteEntry.apply(this,arguments);}var clickDeleteButton=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response,entries;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return deleteEntry(entryID);case 3:response=_context.sent;if(response===201){// remove the removed entry from userEntries local storage\nentries=userEntries.filter(function(entry){return entry.id!==parseInt(entryID);});localStorage.setItem(\"USERENTRIES\",JSON.stringify(entries));setUserEntries(JSON.parse(localStorage.getItem(\"USERENTRIES\")));navigate(\"/journal\");}case 5:case\"end\":return _context.stop();}},_callee);}));return function clickDeleteButton(_x2){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"section\",{className:\"entry-wrapper\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"mt-5\",children:[entry.title,\" \",entry.mood]}),/*#__PURE__*/_jsx(\"h6\",{className:\"mb-5\",children:entry.date}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Keywords: \",entry.keywords]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Description: \",entry.description]}),/*#__PURE__*/_jsx(\"button\",{onClick:clickDeleteButton,className:\"delete-button\",children:\"Delete Entry\"})]});}export default Entry;","map":{"version":3,"names":["useParams","useNavigate","useAuth","jsxs","_jsxs","jsx","_jsx","Entry","_useAuth","userEntries","setUserEntries","navigate","_useAuth2","tokenHeader","_useParams","entryID","entry","filter","id","parseInt","deleteEntry","_x","_deleteEntry","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","wrap","_callee2$","_context2","prev","next","fetch","concat","method","headers","_objectSpread","then","response","status","catch","error","console","log","abrupt","sent","stop","clickDeleteButton","_ref","_callee","e","entries","_callee$","_context","preventDefault","localStorage","setItem","JSON","stringify","parse","getItem","_x2","className","children","title","mood","date","keywords","description","onClick"],"sources":["/Users/lollapalarza/ada/projects/smart-dream-journal/smart-dream-journal-frontend/src/components/profile/journal/entry.js"],"sourcesContent":["import { useParams, useNavigate } from \"react-router\";\nimport { useAuth } from \"../../../contexts/authContext\";\nimport \"./entry.css\";\n\nfunction Entry() {\n  const { userEntries, setUserEntries } = useAuth();\n\n  const navigate = useNavigate();\n\n  // contexts\n  const { tokenHeader } = useAuth();\n  const { entryID } = useParams();\n\n  const entry = userEntries.filter(\n    (entry) => entry.id === parseInt(entryID)\n  )[0];\n\n  async function deleteEntry(entryID) {\n    return await fetch(\n      `https://smart-dream-journal-backend-bf5b1011b117.herokuapp.com/profile/journal/${entryID}/`,\n      {\n        method: \"POST\",\n        headers: {\n          ...tokenHeader,\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    )\n      .then((response) => {\n        return response.status;\n      })\n      .catch((error) => console.log(error));\n  }\n\n  // event handler for delete journal entry\n  const clickDeleteButton = async (e) => {\n    e.preventDefault();\n    const response = await deleteEntry(entryID);\n    if (response === 201) {\n      // remove the removed entry from userEntries local storage\n      const entries = userEntries.filter(\n        (entry) => entry.id !== parseInt(entryID)\n      );\n      localStorage.setItem(\"USERENTRIES\", JSON.stringify(entries));\n      setUserEntries(JSON.parse(localStorage.getItem(\"USERENTRIES\")));\n      navigate(\"/journal\");\n    }\n  };\n\n  return (\n    <section className=\"entry-wrapper\">\n      <h1 className=\"mt-5\">\n        {entry.title} {entry.mood}\n      </h1>\n      <h6 className=\"mb-5\">{entry.date}</h6>\n      <p>Keywords: {entry.keywords}</p>\n      <p>Description: {entry.description}</p>\n      <button onClick={clickDeleteButton} className=\"delete-button\">\n        Delete Entry\n      </button>\n    </section>\n  );\n}\nexport default Entry;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}