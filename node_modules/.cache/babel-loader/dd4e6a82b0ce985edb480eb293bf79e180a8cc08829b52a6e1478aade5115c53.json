{"ast":null,"code":"import _objectSpread from\"/Users/lollapalarza/ada/projects/smart-dream-journal/smart-dream-journal-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/lollapalarza/ada/projects/smart-dream-journal/smart-dream-journal-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/lollapalarza/ada/projects/smart-dream-journal/smart-dream-journal-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/lollapalarza/ada/projects/smart-dream-journal/smart-dream-journal-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/lollapalarza/ada/projects/smart-dream-journal/smart-dream-journal-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Outlet,useNavigate}from\"react-router-dom\";import{useAuth}from\"../../../contexts/authContext\";import NewEntryPopup from\"./newEntryForm\";import\"./journal.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Journal(){var navigate=useNavigate();// contexts\nvar _useAuth=useAuth(),tokenHeader=_useAuth.tokenHeader,setUserEntries=_useAuth.setUserEntries,userEntries=_useAuth.userEntries;// journal form entry states\nvar _useState=useState(Date.now()),_useState2=_slicedToArray(_useState,2),date=_useState2[0],setDate=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),keywords=_useState6[0],setKeyWords=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),description=_useState8[0],setDescription=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),mood=_useState10[0],setMood=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),trigger=_useState12[0],setTrigger=_useState12[1];// Function for API post request for new entry\nfunction postNewEntry(_x){return _postNewEntry.apply(this,arguments);}// event handler for new journal entry form submission\nfunction _postNewEntry(){_postNewEntry=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(entryStates){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"https://smart-dream-journal-backend-bf5b1011b117.herokuapp.com/profile/journal/\",{method:\"POST\",headers:_objectSpread(_objectSpread({},tokenHeader),{},{\"Content-Type\":\"application/json\"}),body:JSON.stringify(entryStates)}).then(function(response){return response.json();}).catch(function(error){return console.log(error);});case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}},_callee2);}));return _postNewEntry.apply(this,arguments);}var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var newEntry,entries;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return postNewEntry({title:title,keywords:keywords,description:description,mood:mood,date:date});case 3:newEntry=_context.sent;// update the local storage USERENTRIES to add new journal entry\nentries=[].concat(_toConsumableArray(userEntries),_toConsumableArray(newEntry));localStorage.setItem(\"USERENTRIES\",JSON.stringify(entries));setUserEntries(JSON.parse(localStorage.getItem(\"USERENTRIES\")));setTrigger(false);navigate(\"/profile\");case 9:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x2){return _ref.apply(this,arguments);};}();var cancelPost=function cancelPost(){setTrigger(false);};return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center mt-5\",children:\"Journal Entries\"}),/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"post-button\",onClick:function onClick(e){return setTrigger(true);},children:\"Post New Journal Entry\"})}),/*#__PURE__*/_jsx(NewEntryPopup,{trigger:trigger,handleSubmit:handleSubmit,cancelPost:cancelPost,setDate:setDate,setTitle:setTitle,setKeyWords:setKeyWords,setDescription:setDescription,setMood:setMood}),/*#__PURE__*/_jsx(Outlet,{})]});}export default Journal;","map":{"version":3,"names":["React","useState","Outlet","useNavigate","useAuth","NewEntryPopup","jsx","_jsx","jsxs","_jsxs","Journal","navigate","_useAuth","tokenHeader","setUserEntries","userEntries","_useState","Date","now","_useState2","_slicedToArray","date","setDate","_useState3","_useState4","title","setTitle","_useState5","_useState6","keywords","setKeyWords","_useState7","_useState8","description","setDescription","_useState9","_useState10","mood","setMood","_useState11","_useState12","trigger","setTrigger","postNewEntry","_x","_postNewEntry","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","entryStates","wrap","_callee2$","_context2","prev","next","fetch","method","headers","_objectSpread","body","JSON","stringify","then","response","json","catch","error","console","log","abrupt","sent","stop","handleSubmit","_ref","_callee","e","newEntry","entries","_callee$","_context","preventDefault","concat","_toConsumableArray","localStorage","setItem","parse","getItem","_x2","cancelPost","children","className","onClick"],"sources":["/Users/lollapalarza/ada/projects/smart-dream-journal/smart-dream-journal-frontend/src/components/profile/journal/journal.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Outlet, useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../../../contexts/authContext\";\nimport NewEntryPopup from \"./newEntryForm\";\nimport \"./journal.css\";\n\nfunction Journal() {\n  const navigate = useNavigate();\n  // contexts\n  const { tokenHeader, setUserEntries, userEntries } = useAuth();\n\n  // journal form entry states\n  const [date, setDate] = useState(Date.now());\n  const [title, setTitle] = useState(\"\");\n  const [keywords, setKeyWords] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [mood, setMood] = useState(\"\");\n  const [trigger, setTrigger] = useState(false);\n\n  // Function for API post request for new entry\n  async function postNewEntry(entryStates) {\n    return await fetch(\n      `https://smart-dream-journal-backend-bf5b1011b117.herokuapp.com/profile/journal/`,\n      {\n        method: \"POST\",\n        headers: {\n          ...tokenHeader,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(entryStates),\n      }\n    )\n      .then((response) => {\n        return response.json();\n      })\n      .catch((error) => console.log(error));\n  }\n\n  // event handler for new journal entry form submission\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const newEntry = await postNewEntry({\n      title,\n      keywords,\n      description,\n      mood,\n      date,\n    });\n    // update the local storage USERENTRIES to add new journal entry\n    const entries = [...userEntries, ...newEntry];\n    localStorage.setItem(\"USERENTRIES\", JSON.stringify(entries));\n    setUserEntries(JSON.parse(localStorage.getItem(\"USERENTRIES\")));\n    setTrigger(false);\n    navigate(\"/profile\");\n  };\n\n  const cancelPost = () => {\n    setTrigger(false);\n  };\n\n  return (\n    <section>\n      <h1 className=\"text-center mt-5\">Journal Entries</h1>\n      <section>\n        <button className=\"post-button\" onClick={(e) => setTrigger(true)}>\n          Post New Journal Entry\n        </button>\n      </section>\n      <NewEntryPopup\n        trigger={trigger}\n        handleSubmit={handleSubmit}\n        cancelPost={cancelPost}\n        setDate={setDate}\n        setTitle={setTitle}\n        setKeyWords={setKeyWords}\n        setDescription={setDescription}\n        setMood={setMood}\n      />\n      <Outlet />\n    </section>\n  );\n}\n\nexport default Journal;\n"],"mappings":"01BAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,MAAM,CAAEC,WAAW,KAAQ,kBAAkB,CACtD,OAASC,OAAO,KAAQ,+BAA+B,CACvD,MAAO,CAAAC,aAAa,KAAM,gBAAgB,CAC1C,MAAO,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEvB,QAAS,CAAAC,OAAOA,CAAA,CAAG,CACjB,GAAM,CAAAC,QAAQ,CAAGR,WAAW,EAAE,CAC9B;AACA,IAAAS,QAAA,CAAqDR,OAAO,EAAE,CAAtDS,WAAW,CAAAD,QAAA,CAAXC,WAAW,CAAEC,cAAc,CAAAF,QAAA,CAAdE,cAAc,CAAEC,WAAW,CAAAH,QAAA,CAAXG,WAAW,CAEhD;AACA,IAAAC,SAAA,CAAwBf,QAAQ,CAACgB,IAAI,CAACC,GAAG,EAAE,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAJ,SAAA,IAArCK,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IACpB,IAAAI,UAAA,CAA0BtB,QAAQ,CAAC,EAAE,CAAC,CAAAuB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA/BE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,IAAAG,UAAA,CAAgC1B,QAAQ,CAAC,EAAE,CAAC,CAAA2B,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAArCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAC5B,IAAAG,UAAA,CAAsC9B,QAAQ,CAAC,EAAE,CAAC,CAAA+B,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAA3CE,WAAW,CAAAD,UAAA,IAAEE,cAAc,CAAAF,UAAA,IAClC,IAAAG,UAAA,CAAwBlC,QAAQ,CAAC,EAAE,CAAC,CAAAmC,WAAA,CAAAhB,cAAA,CAAAe,UAAA,IAA7BE,IAAI,CAAAD,WAAA,IAAEE,OAAO,CAAAF,WAAA,IACpB,IAAAG,WAAA,CAA8BtC,QAAQ,CAAC,KAAK,CAAC,CAAAuC,WAAA,CAAApB,cAAA,CAAAmB,WAAA,IAAtCE,OAAO,CAAAD,WAAA,IAAEE,UAAU,CAAAF,WAAA,IAE1B;AAAA,QACe,CAAAG,YAAYA,CAAAC,EAAA,SAAAC,aAAA,CAAAC,KAAA,MAAAC,SAAA,GAkB3B;AAAA,SAAAF,cAAA,EAAAA,aAAA,CAAAG,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAlBA,SAAAC,SAA4BC,WAAW,SAAAH,mBAAA,GAAAI,IAAA,UAAAC,UAAAC,SAAA,iBAAAA,SAAA,CAAAC,IAAA,CAAAD,SAAA,CAAAE,IAAA,SAAAF,SAAA,CAAAE,IAAA,SACxB,CAAAC,KAAK,mFAEhB,CACEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAAC,aAAA,CAAAA,aAAA,IACFhD,WAAW,MACd,cAAc,CAAE,kBAAkB,EACnC,CACDiD,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACZ,WAAW,CAClC,CAAC,CACF,CACEa,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClB,MAAO,CAAAA,QAAQ,CAACC,IAAI,EAAE,CACxB,CAAC,CAAC,CACDC,KAAK,CAAC,SAACC,KAAK,QAAK,CAAAC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,GAAC,eAAAd,SAAA,CAAAiB,MAAA,UAAAjB,SAAA,CAAAkB,IAAA,0BAAAlB,SAAA,CAAAmB,IAAA,MAAAvB,QAAA,GACxC,UAAAN,aAAA,CAAAC,KAAA,MAAAC,SAAA,GAGD,GAAM,CAAA4B,YAAY,6BAAAC,IAAA,CAAA5B,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAA2B,QAAOC,CAAC,MAAAC,QAAA,CAAAC,OAAA,QAAA/B,mBAAA,GAAAI,IAAA,UAAA4B,SAAAC,QAAA,iBAAAA,QAAA,CAAA1B,IAAA,CAAA0B,QAAA,CAAAzB,IAAA,SAC3BqB,CAAC,CAACK,cAAc,EAAE,CAACD,QAAA,CAAAzB,IAAA,SACI,CAAAd,YAAY,CAAC,CAClClB,KAAK,CAALA,KAAK,CACLI,QAAQ,CAARA,QAAQ,CACRI,WAAW,CAAXA,WAAW,CACXI,IAAI,CAAJA,IAAI,CACJhB,IAAI,CAAJA,IACF,CAAC,CAAC,QANI0D,QAAQ,CAAAG,QAAA,CAAAT,IAAA,CAOd;AACMO,OAAO,IAAAI,MAAA,CAAAC,kBAAA,CAAOtE,WAAW,EAAAsE,kBAAA,CAAKN,QAAQ,GAC5CO,YAAY,CAACC,OAAO,CAAC,aAAa,CAAExB,IAAI,CAACC,SAAS,CAACgB,OAAO,CAAC,CAAC,CAC5DlE,cAAc,CAACiD,IAAI,CAACyB,KAAK,CAACF,YAAY,CAACG,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAC/D/C,UAAU,CAAC,KAAK,CAAC,CACjB/B,QAAQ,CAAC,UAAU,CAAC,CAAC,wBAAAuE,QAAA,CAAAR,IAAA,MAAAG,OAAA,GACtB,kBAfK,CAAAF,YAAYA,CAAAe,GAAA,SAAAd,IAAA,CAAA9B,KAAA,MAAAC,SAAA,OAejB,CAED,GAAM,CAAA4C,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAA,CAAS,CACvBjD,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAED,mBACEjC,KAAA,YAAAmF,QAAA,eACErF,IAAA,OAAIsF,SAAS,CAAC,kBAAkB,CAAAD,QAAA,CAAC,iBAAe,EAAK,cACrDrF,IAAA,YAAAqF,QAAA,cACErF,IAAA,WAAQsF,SAAS,CAAC,aAAa,CAACC,OAAO,CAAE,SAAAA,QAAChB,CAAC,QAAK,CAAApC,UAAU,CAAC,IAAI,CAAC,EAAC,CAAAkD,QAAA,CAAC,wBAElE,EAAS,EACD,cACVrF,IAAA,CAACF,aAAa,EACZoC,OAAO,CAAEA,OAAQ,CACjBkC,YAAY,CAAEA,YAAa,CAC3BgB,UAAU,CAAEA,UAAW,CACvBrE,OAAO,CAAEA,OAAQ,CACjBI,QAAQ,CAAEA,QAAS,CACnBI,WAAW,CAAEA,WAAY,CACzBI,cAAc,CAAEA,cAAe,CAC/BI,OAAO,CAAEA,OAAQ,EACjB,cACF/B,IAAA,CAACL,MAAM,IAAG,GACF,CAEd,CAEA,cAAe,CAAAQ,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}